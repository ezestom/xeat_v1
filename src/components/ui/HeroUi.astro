---
import { Image } from "astro:assets";
import triple from "../../img/triple.png";
import Slider from "../ui/Slider.astro";
import img from "../../img/hero-1.png";
import whatsapp from "../../icons/whatsappColor.svg";
import img2 from "../../img/hero-2.png";
import img3 from "../../img/hero-3.png";
import img4 from "../../img/hero-4.png";
import img5 from "../../img/hero-5.png";

const response = await fetch(
	"https://us-east4.gcp.data.mongodb-api.com/app/home-ybjtf/endpoint/210"
);
const data = await response.json();
---

<section
	class="grid grid-cols-1 justify-center xl:grid-cols-2 overflow-hidden pt-20 md:pt-0 h-[95%]">
	<article class="my-auto">
		<img
			class="burger"
			src={data.slider_inicio[0].imagen}
			alt=`image of ${img}`
		/>
		<!-- <div class="container">
			<Image class="photo" src={img} alt=`image of ${img}` />
			<Image class="photo" src={img2} alt=`image of ${img2}` />
			<Image class="photo" src={img3} alt=`image of ${img3}` />
			<Image class="photo" src={img4} alt=`image of ${img4}` />
			<Image class="photo" src={img5} alt=`image of ${img5}` />
		</div> -->
	</article>
	<article class="flex flex-col m-auto">
		<div class="flex flex-col justify-center h-full gap-8 items-center">
			<h2
				class="text-5xl md:text-[5vw] text-nowrap px-4 py-2 uppercase font-black text-black bg-[red]">
				{data.slider_inicio[0].titulo}
			</h2>
			<p class="text-center px-4">
				<span class="text-2xl text-[--black]"
					>{data.slider_inicio[0].subtitulo}</span
				>
			</p>
			<p class="text-center px-4">
				<span
					class="text-2xl text-[--black] font-light italic opacity-50"
					>{data.slider_inicio[0].comentario}</span
				>
			</p>

			<a
				class="text-3xl md:text-[2.5vw] uppercase hover:underline text-center bg-[--black] text-[--white] font-bold px-5 flex py-5 md:px-8 items-center justify-center"
				href="/smashburgers">
				{data.slider_inicio[0].titulo_boton}
			</a>
		</div>
	</article>
	<div class="w-screen overflow-hidden max-w-screen">
		<Slider text="the burger vilas" text2="smashbuergers since 2020" />
	</div>
	<a
		target="_blank"
		class="fixed bottom-1 right-2 max-w-14 z-50"
		href={`https://wa.me/${data.whatsapp[0].numero}`}
		><img
			src={whatsapp.src}
			alt="whatsapp image"
			class="z-80 animate-bounce hover:animate-none"
		/></a
	>
</section>

<style>
	.burger,
	h2 {
		filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.5));
	}
	/* Define variables */
	:root {
		--slides: 5;
		--time-per-slide: 5s;
		--total-animation-time: calc(var(--slides) * var(--time-per-slide));
	}

	/* Styles */

	.container {
		width: 100%;
		height: 100%;
		overflow: hidden;
		position: relative;
		border-left: 1px solid black;
	}

	.photo {
		position: absolute;
		animation: round var(--total-animation-time) infinite;
		opacity: 0;
	}

	@keyframes round {
		25% {
			opacity: 1;
			filter: brightness(1.5);
		}
		40% {
			opacity: 0;
		}
	}

	/* Set animation delays for each image */
	.container img:nth-child(1) {
		animation-delay: calc(
			var(--total-animation-time) - var(--time-per-slide) * 1
		);
	}

	.container img:nth-child(2) {
		animation-delay: calc(
			var(--total-animation-time) - var(--time-per-slide) * 2
		);
	}

	.container img:nth-child(3) {
		animation-delay: calc(
			var(--total-animation-time) - var(--time-per-slide) * 3
		);
	}

	.container img:nth-child(4) {
		animation-delay: calc(
			var(--total-animation-time) - var(--time-per-slide) * 4
		);
	}
</style>
